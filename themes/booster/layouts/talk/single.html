{{ define "head" }}
    {{- if .Params.talk_type }}
        {{- $basePath := (print "/og/og_base_" (strings.Replace (strings.ToLower .Params.talk_type) " " "_") ".png" ) }}
        {{- $img := resources.Get $basePath  }}
            {{- if $img }}
            {{- $mediumFont := resources.Get "/RobotoCondensed.ttf"}}
            {{- $titleFilter := (images.Text (strings.ToUpper .Page.Title) (dict
            "color" "#fefcf6"
            "size" 64
            "linespacing" 19
            "x" 80
            "y" 80
            "font" $mediumFont
            ))}}
            {{- $img = $img.Filter $titleFilter}}
            {{- $authorCount := ((default dict .Params.authors) | len) }}
            {{- $authorFontSize := 42 }}
            {{- range $i, $author := .Params.authors }}
                {{- range ( where $.Site.Pages "Params.name" $author ) }}
                    
                    {{ $authorFilter := (images.Text .Params.name (dict
                    "color" "#fefcf6"
                    "size" $authorFontSize
                    "linespacing" 19
                    "aligny" "bottom"
                    "x" 80
                    "y" (math.Sum 548 (math.Mul (math.Sub (math.Sub $authorCount $i) 1) (math.Mul (math.Add $authorFontSize 19) -1)))
                    "font" $mediumFont
                    ))}}
                    {{ $img = $img.Filter $authorFilter}}
                    
                {{- end }}
            {{- end }}
            {{- $img = resources.Copy (path.Join .Page.RelPermalink "og34.png") $img }}
            <meta property="og:image" content="{{$img.Permalink}}">
            <meta property="og:image:width" content="{{$img.Width}}" />
            <meta property="og:image:height" content="{{$img.Height}}" />
        {{- end }}
    {{- end }}
{{- end }}
{{- define "main" }}
<div class="header-join">
    <h1>{{ .Title | markdownify }}</h1>
</div>
<article class="inner">
    {{- range .Params.authors }}
    {{- range ( where $.Site.Pages "Params.name" . ) }}
    {{- if .Params.external_profile }}
    <h4><a href="{{ .Params.external_profile }}">{{ .Params.name }}</a></h4>
    {{- else }}
    <h4><a href="{{ .RelPermalink }}">{{ .Params.name }}</a></h4>
    {{- end }}
    {{- end }}
    {{- end }}

    <p>
        <span class="muted">{{ .Params.talk_type }}</span>
        {{ if .Param "time_slot" }}
        &mdash;
        <span class="muted">{{ .Param "time_slot" }}</span>
        {{ end }}
        {{ if .Param "room" }}
        &mdash;
        <span class="muted">{{ .Param "room" }}</span>

        {{ end }}
    </p>

    {{ if .Params.recording_url }}
    <p>
      <div style="padding:35% 0 0 0;position:relative;"><iframe src="{{ replace .Params.recording_url "https://vimeo.com/" "https://player.vimeo.com/video/" }}?h=51c09b009d&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;" title="{{ .Title }} - {{ .Params.author }}"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>
    </p>
    {{ end }}
    <p>
        {{ $files := .Page.Resources }}
        {{ if $files }}
        {{ range $files }}
        <a href="{{ .RelPermalink }}"><i class="fa fa-sticky-note" title="{{ .Title }}"></i> {{ .Title }}</a>
        {{ end }}
        {{ end }}
    </p>

    <div class="description">
        {{ .Content }}
    </div>


</article>
{{end}}
